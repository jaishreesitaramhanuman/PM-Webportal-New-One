# Software Requirements Specification (SRS) for VisitWise: Hierarchical Data Collection & Reporting Platform

**Document Version:** 1.5 (Renamed and Updated for Template-Based Forms)  
**Date:** November 08, 2025  
**Prepared By:** [Your Name] – Project Lead  
**Prepared For:** Development Team (Full-Stack: Next.js with Existing UI Prototype)  
**Approval Signatures:** ________________________ (Stakeholder) | ________________________ (Team Lead)  

**Revision Notes:** This version renames the application from "HierarchyFlow" to **VisitWise**, reflecting a focus on tourism and visit-related data collection (e.g., visitor stats, profiles for UTs like Andaman & Nicobar). Enhancements to the forms module support template-based designs for different modes (e.g., predefined templates for domains like Energy with MW tables, Tourism with visitor stats/festivals). It also enables custom template creation (e.g., Super Admins or PMO can define new modes/schemas via a simple editor). This builds on the existing UI prototype (e.g., extend Form component with template selector). The updated architecture diagram is referenced with VisitWise mappings (e.g., "Report Gen Service" for mode-specific generation). No code or schemas included; AI tools will derive these during implementation, ensuring UI preservation.

---

## 1. Introduction

### 1.1 Purpose
This Software Requirements Specification (SRS) defines the functional and non-functional requirements for **VisitWise**, a web-based platform designed to streamline hierarchical data collection, approval, and consolidation workflows in large-scale organizational structures, such as government reporting systems (e.g., NITI Aayog-inspired state/UT profiles). The platform addresses inefficiencies in manual processes like email-based DOCX exchanges by automating request propagation, form-based data entry, multi-level merges, deadline monitoring, and AI-assisted insights.

The primary goals are to:
- Ensure timely, accurate data flow from top (PMO) to bottom (Div YP) and back, with branching for domains (e.g., Energy, Tourism).
- Generate structured reports (e.g., mirroring Andaman & Nicobar Energy and Tourism profiles) dynamically from user inputs using template-based forms for different modes.
- Provide oversight tools for Super Admins to monitor compliance across states/UTs.
- Leverage Next.js for full-stack development, preserving the existing UI prototype while implementing backend via API routes; Use free-tier resources for development and initial deployment to minimize costs during startup, focusing on simple, manual setups and key-based AI access.

This SRS serves as the foundational blueprint for implementation, guiding the team in building a scalable MVP while deferring detailed technical schemas (e.g., database models, API contracts) to iterative design phases handled by AI-assisted code generation tools. The existing Next.js UI (e.g., pages, components) remains untouched, with backend enhancements integrated seamlessly.

### 1.2 Scope
**In Scope:**
- User authentication and role-based access control (RBAC) for 7 core roles, implemented as Next.js API routes.
- Workflow automation for downward request cascading and upward data consolidation, including branching by state (e.g., AndamanNicobar) and domain (e.g., Energy), via serverless API handlers.
- Dynamic, domain-specific forms at entry levels (Div YP/State Div HOD) with predefined (e.g., tables for MW stats) and custom elements (e.g., notes, references), using template-based designs for different modes (e.g., Energy mode template) and support for custom template creation.
- Automated document generation (DOCX/PDF) and storage, with previews and exports.
- Deadline-driven alert system (in-app, email, SMS) with escalation.
- AI chatbot for queries and auto-suggestions (e.g., summarizing deficits or generating reform bullets), using Gemini API key for free access.
- Role-tailored dashboards and analytics (e.g., progress heatmaps, overdue counts), building on existing Dashboard skeletons.
- Integration with free resources: MongoDB Atlas (free tier for DB and GridFS storage), Vercel (free hosting with manual deploys for Next.js), SendGrid free tier (emails), Twilio trial (SMS), Gemini API (free key-based calls).

**Out of Scope:**
- Mobile native app (web-responsive only).
- Advanced ML training (use pre-trained Gemini models).
- Payment processing or premium features.
- Offline mode beyond basic draft saving.
- Complex storage or deployment pipelines (e.g., no external object storage; manual uploads/deploys only; No separate backend server – all via Next.js API routes).

### 1.3 Definitions, Acronyms, and Abbreviations
- **Div YP:** Division Young Professional (lowest data collector).
- **State Div HOD:** State Division Head of Department (domain checker).
- **RBAC:** Role-Based Access Control.
- **RAG:** Retrieval-Augmented Generation (AI technique for context-aware responses).
- **UT:** Union Territory (e.g., Andaman & Nicobar).
- **DOCX:** Microsoft Word document format.
- **MVP:** Minimum Viable Product.
- **SSR:** Server-Side Rendering (for Next.js performance).
- **GridFS:** MongoDB's free file storage mechanism for larger binaries like generated docs.
- **Gemini API:** Google’s free-tier AI service, accessed via API key.
- **API Routes:** Next.js serverless endpoints in `/app/api` for backend logic.
- **Form Template:** Reusable JSON structure for a mode (e.g., Energy template: predefined sections like tables; Custom templates: User-defined via editor).

### 1.4 References
- Provided Documents: Andaman & Nicobar Energy Division Report (31.07.2025) – Sample for power stats tables; Tourism & Culture Profile – Sample for visitor growth and festival lists.
- Existing UI Prototype: Teammate's Next.js build (e.g., `/app/login/page.tsx`, `/components/Form.tsx` – to remain intact; Extend for template selector).
- Updated Diagram: "VisitWise Architecture" (edited visual: Incorporates "Warranty" for user layer safeguards, "Deer keyol" as role-key mappings, and "AI GENERATED" for dynamic components; Next.js API routes map to "Workflow Service").
- Standards: IEEE Std 830-1998 (SRS Template); WCAG 2.1 (Accessibility).
- Free Resources: MongoDB Atlas Documentation (Free Tier + GridFS Setup); Vercel Next.js Guide (Manual Deploy); Google AI Studio Gemini API Quickstart (Free Key Generation).

### 1.5 Overview
Section 2 describes the overall product perspective and functions, integrating the updated diagram for architectural visualization with Next.js focus. Section 3 details specific requirements, categorized by functional (e.g., workflows via API routes) and non-functional (e.g., performance). Appendices include use case diagrams and free resource mappings.

---

## 2. Overall Description

### 2.1 Product Perspective
VisitWise positions itself as a free-to-start, open-source-inspired workflow tool tailored for hierarchical bureaucracies, evolving from ad-hoc tools like Google Forms + Sheets. It differentiates by:
- Enforcing multi-level approvals/merges to prevent data silos (e.g., combining Energy MW tables with Tourism visitor stats into a unified UT profile).
- Incorporating real-world samples (e.g., CEA-sourced Installed Capacity tables) for domain-specific forms via templates.
- Starting lean with Next.js full-stack (UI intact, backend as API routes) and free cloud services with manual deploys to validate MVP before scaling, as visualized in the updated diagram's "External Services" block (e.g., free SendGrid/Twilio for notifications, no advanced storage).

Similar systems (e.g., Airtable workflows) lack built-in hierarchy branching and AI; VisitWise fills this gap affordably, with the diagram's "Warranty" layer ensuring user trust through free-tier reliability and key-based AI access.

### 2.2 Product Functions
High-level functions include:
- **Request Initiation & Propagation:** PMO creates timed requests; auto-branches to domains/states with notifications.
- **Data Entry & Generation:** Lowest levels use guided forms to input structured data via templates for different modes (e.g., select Energy mode for MW tables); system generates report docs on submit; Support custom template creation for new modes.
- **Review & Consolidation:** Intermediate roles validate, merge (e.g., average deficits across sub-branches), and approve.
- **Monitoring & Alerts:** Automated checks for deadlines; multi-channel escalations.
- **Insights & Oversight:** AI queries on consolidated data via Gemini API key; Super Admin aggregates for trends (e.g., national vs. UT non-fossil shares).
- **Reporting:** Exportable, versioned docs with audit trails.

The updated architecture diagram illustrates these as layered flows: User Layer ("Deer keyol" for role mappings) → API Gateway (Next.js API routes) → Data Layer (MongoDB for primary storage, GridFS for docs) → AI/ML Layer ("AI GENERATED" for RAG pipelines) → External Services (free SendGrid/Twilio). This ensures cost-free scalability, with "Warranty" overlay for compliance monitoring and manual Vercel deploys.

### 2.3 User Classes and Characteristics
- **Super Admin:** IT-savvy overseers (1-2 users); Need global views; Browser access.
- **PMO/CEONITI:** Senior managers (5-10); High-level monitoring; Desktop primary.
- **State Advisor/YP/HOD:** Coordinators (50+ per state); Mid-flow tasks; Mix desktop/mobile.
- **Div YP:** Field collectors (100+); Form-focused; Mobile-friendly for remote entry (e.g., Andaman islands).

All users: Basic computer literacy; Access via modern browsers (Chrome/Edge). Diagram's "Role Das-boards" supports tailored views, preserved in existing UI.

### 2.4 Operating Environment
- **Hardware:** Standard web (laptop/desktop with 4GB+ RAM); Mobile (iOS/Android 10+ for responsive views).
- **Software:** Full-stack Next.js (runs on Node 18+); UI prototype intact (e.g., existing pages/components).
- **Networks:** Internet-required; Free hosting on Vercel (full Next.js app) via manual deploys (e.g., vercel --prod).
- **Free Resources Integration:** MongoDB Atlas free cluster (512MB storage + GridFS for doc files); Redis Labs free tier (30MB for sessions/queues). Diagram's "External Services" block maps these directly.

### 2.5 Design and Implementation Constraints
- Use open-source/free libs only (e.g., Mongoose for Mongo/GridFS, Socket.io for real-time – no paid plugins).
- Full-Stack: Next.js App Router for SSR/UI (keep existing prototype intact – e.g., no changes to `/components/Form.tsx`; Add template selector prop); Backend logic exclusively via API routes (`/app/api/routes` – e.g., `/api/workflows/route.ts` for requests).
- Data: JSON schemas for forms/templates (AI-generated); GridFS for generated docs (free in Atlas).
- Languages: TypeScript (full-stack) for consistency.
- Diagram Constraints: "AI GENERATED" elements (e.g., RAG Pipeline) must use free Gemini API key; "Warranty" implies free monitoring via Vercel Analytics; Manual deploys only (e.g., Vercel CLI commands, no pipelines); Templates stored as JSON in MongoDB.

### 2.6 Assumptions and Dependencies
- Assumptions: Users have email/SMS for alerts; Stable internet (no offline-first); Existing Next.js UI prototype is deployable as-is.
- Dependencies: Free tiers suffice for <100 users (e.g., Gemini free RPM for AI); Team has GitHub for collab (free repos). Diagram assumes "HTTPS/WSS" for secure free deploys.

---

## 3. Specific Requirements

### 3.1 External Interface Requirements
#### 3.1.1 User Interfaces
- **Frontend:** Responsive SPA via Next.js; Role-gated navigation (e.g., sidebar: Tasks | Forms | Reports | Chat – hidden for Div YP; Preserve existing components/pages).
- **Forms:** Dynamic rendering (e.g., MUI tables for Energy MW rows; Quill for Tourism festival bullets; Extend existing Form without altering structure; Add mode selector for templates, e.g., dropdown: "Energy Mode" loads predefined template).
- **Dashboards:** SSR-loaded (e.g., PMO: Gantt for timelines; Super Admin: Filterable tables for overdues; Build on existing Dashboard skeletons). Diagram's "Workflow UI" supports these.

#### 3.1.2 Hardware Interfaces
- None (web-only).

#### 3.1.3 Software Interfaces
- **APIs:** Next.js API routes (e.g., POST /api/requests for PMO); WebSockets for alerts (rooms by state-branch, via Socket.io in API route).
- **Integrations:** Gemini API (free key: /v1beta/models/gemini-pro for RAG); SendGrid (free 100 emails/day); Twilio (free trial SMS). Diagram's "External Services" visualizes these.

#### 3.1.4 Communications Interfaces
- HTTPS for APIs; WS for real-time (e.g., wss://vercel-app-url).
- Email/SMS via free tiers; No VoIP. Diagram's "Notifications Service" (Email/SMS, WebSockets) aligns.

### 3.2 Functional Requirements
Organized by module; Prioritized (Must-Have for MVP). Diagram mappings added for traceability; Backend via Next.js API routes.

#### 3.2.1 Authentication Module (Must-Have)
- FR-01: Users log in with username/password; Issue JWT with role/state/branch claims (24h expiry). [Diagram: Auth Service – JWT/RBAC/Sessions; Implement as /api/auth/route.ts]
- FR-02: RBAC enforces access (e.g., Div YP can only submit forms for their branch; Middleware in API routes).
- FR-03: Logout blacklists token; Session restore via refresh. [Free: Redis free tier for blacklisting]

#### 3.2.2 Workflow Module (Must-Have)
- FR-04: PMO creates requests (fields: infoNeed, timeline > now+3 days, targets: states/branches arrays). [Diagram: Workflow Service – Request/Forward/Approve; /api/workflows/route.ts]
- FR-05: Requests auto-propagate on approval (e.g., CEO NITI approves → Branch to Advisor; WS notify relevant rooms).
- FR-06: Roles view/filter tasks (e.g., HOD: GET pending forms for state-branch; Paginated, sorted by deadline).
- FR-07: Approvals include notes; Reject reverts status + alerts submitter.

#### 3.2.3 Forms & Document Generation Module (Must-Have)
- FR-08: Load domain schemas as templates for different modes (e.g., GET /api/templates/Energy → JSON template with predefined sections like table for Installed Capacity: headers ['Category', 'Andaman MW', 'India MW'], sample rows; Support mode selector in UI to switch templates). [Diagram: Report Gen Service – AI Report/PDF Gen; /api/templates/route.ts]
- FR-09: Div YP submits forms using selected template (validate data matches template schema; Generate DOCX with sections/tables/footnotes based on mode; Store in GridFS free tier; Extend existing Form component with template loader).
- FR-10: HOD/YP consolidate (select child forms; Auto-merge e.g., avg MW from Energy mode templates, concat lists from Tourism; Gen updated DOCX using merged template).
- FR-11: Previews/downloads (e.g., iframe for DOCX; Export PDF via free Puppeteer). [Free: GridFS in Atlas for storage]
- FR-19: Super Admin/PMO creates custom templates (e.g., POST /api/templates/custom → Define new mode with JSON sections like tables/lists; Save to MongoDB for reuse; UI editor in existing dashboard). [Diagram: AI/ML Layer for dynamic generation support]

#### 3.2.4 Alerts & Deadlines Module (Must-Have)
- FR-12: Set deadlines on requests/forms (default: timeline -3 days for drafts). [Diagram: Notification Service – Email/SMS, WebSockets; /api/notifications/route.ts]
- FR-13: Hourly scans trigger alerts (e.g., if overdue on Nov 08: Email "Engage: Andaman Tourism due" + SMS short-link).
- FR-14: Escalation: +24h overdue → Notify up-level (e.g., YP pings HOD); In-app toasts via WS. [Free: SendGrid/Twilio tiers]

#### 3.2.5 AI Module (Nice-to-Have for MVP)
- FR-15: Chatbot queries data (e.g., "Andaman Energy deficit?" → "5.7% – Cite CEA; Suggest: LNG plant"). [Diagram: Chatbot Service – RAG/Vector/Query; AI/ML Layer – RAG Pipeline/Document Ingestion; /api/ai/route.ts with Gemini key]
- FR-16: Auto-generate content (e.g., button in form: "Suggest reforms" → Bullets for Tourism boosts like "Eco-resorts").

#### 3.2.6 Dashboards & Analytics Module (Must-Have)
- FR-17: Role views (e.g., Super Admin: Aggregates table – States | Branches | Overdues | Completion %; SSR on existing Dashboard page). [Diagram: Analytics Service – Dashboard/Metrics; /api/analytics/route.ts]
- FR-18: Exports (e.g., CSV for metrics; PDF for full reports). [Free: Vercel for SSR dashboards]

### 3.3 Non-Functional Requirements
#### 3.3.1 Performance Requirements
- Response time: <2s for form loads/submits; <5s for merges (up to 10 children). [Diagram: Redis Cache for sessions/rate limits]
- Scalability: Handle 100 concurrent users (free tiers: Vercel hobby).
- Availability: 99% uptime (leverage free hosting SLAs). [Diagram: Warranty Layer for monitoring]

#### 3.3.2 Safety and Security Requirements
- Authentication: JWT + bcrypt hashes; Rate-limit 100/min/IP (in API routes). [Diagram: Auth Service – RBAC]
- Data Protection: Encrypt GridFS docs; Audit all actions (e.g., log merges to free Postgres tier).
- Compliance: WCAG AA; No PII beyond email (GDPR-inspired consent for alerts).

#### 3.3.3 Software Quality Attributes
- Usability: Intuitive steppers (e.g., form: 1. Load Template → 2. Fill → 3. Preview); Mobile-responsive (Bootstrap-free via Tailwind; UI intact).
- Reliability: Retry queues for alerts (3x); Backup via Atlas free snapshots. [Diagram: External Services – Monitoring Datadog free tier equivalent]
- Maintainability: Modular (e.g., services for merges in `/lib`); AI-generated code with comments.
- Portability: Cross-browser (Chrome 90+, Firefox 85+); Free deploys to Vercel via manual CLI.

#### 3.3.4 Free Resource Constraints
- DB: MongoDB Atlas M0 free (512MB, shared cluster + GridFS for docs – sufficient for 10k forms/templates). [Diagram: MongoDB Primary DB]
- Hosting: Vercel Hobby (Full Next.js: 100GB bandwidth/month, manual deploys via CLI).
- AI: Gemini API free tier (rate: 15 RPM via key – cache responses). [Diagram: AI/ML Layer]
- Storage: MongoDB GridFS Free Tier (integrated in Atlas – for <500 docs/templates).
- Notifs: SendGrid Free (100 emails/day); Twilio Trial (unlimited SMS during dev). [Diagram: External Services – SendGrid/Twilio]

### 3.4 Other Requirements
- **Documentation:** Auto-generated API docs (Swagger-free via comments); User guide (Markdown on GitHub; Include template creation guide).
- **Testing:** Manual for MVP; Plan for unit (Jest) + E2E (Playwright free; Test template switching in Form).
- **Phased Rollout:** MVP: Core flows (FR-01 to FR-10, FR-19) in 4 weeks; AI/Alerts in Week 5; Using free GitHub Projects for tracking. Diagram integration: Validate flows against "Workflow Service" paths; Manual Vercel deploys only (e.g., vercel --prod after git push).

---

## Appendix A: Use Case Diagram (Textual)
- Actor: PMO → Create Request → System Branches to CEO. [Diagram: PMO → CEO NITI Aayog]
- Actor: Div YP → Select Template Mode → Load Schema → Submit Form → Gen Doc. [Diagram: Div YP → Send Collected Data]
- Actor: HOD → View Children → Merge → Approve. [Diagram: State Div HOD → Run Checks]
- Actor: Super Admin → Create Custom Template → Query Analytics → View Alerts. [Diagram: Warranty Layer Oversight]

## Appendix B: Free Resource Mapping (Diagram-Aligned)
| Resource | Diagram Block | Usage | Limits | Mitigation |
|----------|---------------|--------|---------|------------|
| MongoDB Atlas | MongoDB Primary DB | Schemas/Forms/Requests + GridFS for Docs/Templates | 512MB | Shard by state if >10k records |
| Vercel | Web Portal (React SPA) + API Routes | Full Next.js UI/Backend (Manual CLI Deploy) | 100GB BW/mo | Paginate heavy dashboards |
| Gemini API | AI/ML Layer (RAG Pipeline) | Chat Queries/Auto-Gen (Key-Based) | 15 RPM free | Fallback to static summaries |
| MongoDB GridFS | S3 Storage Equivalent (Documents/Images) | DOCX/PDF/Template Storage | Integrated in Atlas 512MB | Compress outputs |
| SendGrid | External Services (SendGrid Email) | Alerts/Notifications | 100 emails/day | Batch non-urgent |
| Twilio Trial | External Services (Twilio SMS) | Deadline Escalations | Unlimited dev SMS | Switch to email for prod scale |
